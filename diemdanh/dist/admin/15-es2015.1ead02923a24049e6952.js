(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"79ym":function(t,e,o){"use strict";o.r(e),o.d(e,"OrderModule",(function(){return j}));var r=o("ofXK"),n=o("lDzL"),c=o("3Pt+"),a=o("tgok"),i=o("ZOsW"),s=o("K3ix"),b=o("TT0I"),l=o("tyNb"),u=o("XNiG"),d=o("Kj3r"),p=o("+ts/"),m=o("fXoL"),g=o("hfSs");function h(t,e){if(1&t&&(m.Pb(0,"strong",22),m.zc(1),m.Ob()),2&t){const t=e.rowIndex,o=m.Yb();m.xb(1),m.Ac(t+1+(10*o.pageResult.page-10))}}function f(t,e){if(1&t&&(m.zc(0),m.Zb(1,"convertDataViewPipe")),2&t){const t=e.row,o=m.Yb();m.Bc(" ",m.bc(1,1,t.status,o.arrRole)," ")}}function P(t,e){if(1&t){const t=m.Qb();m.Pb(0,"i",23),m.Wb("click",(function(){m.pc(t);const o=e.row;return m.Yb().editItem(o.id)})),m.Ob()}}function O(t,e){if(1&t&&(m.Pb(0,"option",29),m.zc(1),m.Ob()),2&t){const t=e.$implicit;m.fc("value",t.number),m.xb(1),m.Ac(t.name)}}function x(t,e){if(1&t){const t=m.Qb();m.Pb(0,"div",24),m.zc(1," DIsplay "),m.Pb(2,"select",25),m.Wb("ngModelChange",(function(e){return m.pc(t),m.Yb().pageResult.per_page=e}))("click",(function(){return m.pc(t),m.Yb().selectItemPerPage()})),m.xc(3,O,2,2,"option",26),m.Ob(),m.Pb(4,"span",27),m.zc(5),m.Ob(),m.Ob(),m.Pb(6,"datatable-pager",28),m.Wb("change",(function(e){return m.pc(t),m.Yb(),m.mc(18).onFooterPage(e)}))("change",(function(e){return m.pc(t),m.Yb().changePage(e)})),m.Ob()}if(2&t){const t=m.Yb();m.xb(2),m.ec("ngModel",t.pageResult.per_page),m.xb(1),m.ec("ngForOf",t.element),m.xb(2),m.Bc(" in total ",t.pageResult.total_objects," result"),m.xb(1),m.ec("pagerLeftArrowIcon","datatable-icon-left")("pagerRightArrowIcon","datatable-icon-right")("pagerPreviousIcon","datatable-icon-prev")("pagerNextIcon","datatable-icon-skip")("page",t.pageResult.page)("size",t.pageResult.per_page)("count",t.pageResult.total_objects)}}function v(t,e){if(1&t){const t=m.Qb();m.Pb(0,"div",30),m.Pb(1,"h4",31),m.zc(2,"Are you sure delete this item?"),m.Ob(),m.Pb(3,"button",32),m.Wb("click",(function(){return m.pc(t),m.Yb().modalRef.hide()})),m.Pb(4,"span",33),m.zc(5,"\xd7"),m.Ob(),m.Ob(),m.Ob(),m.Pb(6,"div",34),m.Pb(7,"button",35),m.Wb("click",(function(){return m.pc(t),m.Yb().DeleteItem()})),m.zc(8,"Yes"),m.Ob(),m.Pb(9,"button",36),m.Wb("click",(function(){return m.pc(t),m.Yb().modalRef.hide()})),m.zc(10,"No"),m.Ob(),m.Ob()}}let C=(()=>{class t{constructor(t,e,o,r){this.orderService=t,this.fb=e,this.router=o,this.modalService=r,this.element=p.c,this.arrRole=p.o,this.pageResult={page:1,per_page:10,total_objects:0,search:""},this.isAdmin=!0,this.messages={emptyMessage:"No data to display"},this.modelProduct=new u.a}ngOnInit(){this.getProducts(),this.delaySearch()}delaySearch(){this.modelProduct.pipe(Object(d.a)(p.p)).subscribe(t=>{this.pageResult.search=t,this.pageResult.page=1,this.getProducts()})}getProducts(){this.orderService.getListDatas(this.pageResult).subscribe(t=>{this.tableData=t.orders,this.pageResult.total_objects=t.meta.pagination.total_objects||1})}addNewItem(){this.router.navigate(["pages/orders/create"])}editItem(t){this.router.navigate(["pages/orders/detail/"+t])}changePage(t){this.pageResult.page=t.page,this.getProducts()}selectItemPerPage(){this.pageResult.page=1,this.getProducts()}GetIdDelete(t,e){this.modalRef=this.modalService.show(t),this.id=e}searchFillter(t){this.modelProduct.next(t)}}return t.\u0275fac=function(e){return new(e||t)(m.Jb(p.h),m.Jb(c.b),m.Jb(l.b),m.Jb(s.b))},t.\u0275cmp=m.Db({type:t,selectors:[["app-order"]],decls:31,vars:11,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-lg-3"],[1,"searchContainer"],[1,"icon"],[1,"fa","fa-search"],["type","text","placeholder","T\xecm...",1,"form-control",3,"keyup"],["type","button",1,"btn","btn-success",3,"click"],[1,"table"],[1,"material","expandable","striped",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","messages"],["table",""],["name","STT",2,"width","60px !important",3,"sortable","resizeable","canAutoResize","maxWidth"],["style","width: 60px !important;","ngx-datatable-cell-template",""],["name","Code","cellClass","textalignleft","prop","code"],["name","User","cellClass","textalignleft","prop","user.fullname"],["name","Status  ","cellClass","textalignleft"],["ngx-datatable-cell-template",""],["name","Action",3,"sortable"],["ngx-datatable-footer-template",""],["deleteRow",""],[2,"width","60px !important"],["aria-hidden","true",1,"fa","fa-pencil-square-o","icon-action",3,"click"],[1,"col-6","col-md-6"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[1,"soluong"],[1,"col-6","col-md-6",3,"pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","pagerNextIcon","page","size","count","change"],[3,"value"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(t,e){1&t&&(m.Pb(0,"div",0),m.Pb(1,"div",1),m.Pb(2,"div",2),m.Pb(3,"div",3),m.Pb(4,"div",0),m.Pb(5,"div",4),m.Pb(6,"div",5),m.Pb(7,"span",6),m.Kb(8,"i",7),m.Ob(),m.Pb(9,"input",8),m.Wb("keyup",(function(t){return e.searchFillter(t.target.value)})),m.Ob(),m.Ob(),m.Ob(),m.Kb(10,"div",4),m.Pb(11,"div",4),m.Pb(12,"div",2),m.Pb(13,"button",9),m.Wb("click",(function(){return e.addNewItem()})),m.zc(14,"Create"),m.Ob(),m.Ob(),m.Ob(),m.Kb(15,"div",4),m.Ob(),m.Pb(16,"div",10),m.Pb(17,"ngx-datatable",11,12),m.Pb(19,"ngx-datatable-column",13),m.xc(20,h,2,1,"ng-template",14),m.Ob(),m.Kb(21,"ngx-datatable-column",15),m.Kb(22,"ngx-datatable-column",16),m.Pb(23,"ngx-datatable-column",17),m.xc(24,f,2,4,"ng-template",18),m.Ob(),m.Pb(25,"ngx-datatable-column",19),m.xc(26,P,1,0,"ng-template",18),m.Ob(),m.Pb(27,"ngx-datatable-footer"),m.xc(28,x,7,10,"ng-template",20),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.Ob(),m.xc(29,v,11,0,"ng-template",null,21,m.yc)),2&t&&(m.xb(17),m.ec("columnMode","force")("headerHeight",50)("footerHeight",80)("rowHeight","auto")("rows",e.tableData)("messages",e.messages),m.xb(2),m.ec("sortable",!1)("resizeable",!1)("canAutoResize",!1)("maxWidth",80),m.xb(6),m.ec("sortable",!1))},directives:[n.e,n.b,n.a,n.f,n.c,c.l,c.g,c.i,r.k,n.d,c.j,c.n],pipes:[g.a],styles:[".list-name-order[_ngcontent-%COMP%]{list-style:none}"]}),t})();function _(t,e){1&t&&(m.Pb(0,"h4",8),m.zc(1,"Description \u0111\u01a1n h\xe0ng"),m.Ob())}function y(t,e){1&t&&(m.Pb(0,"h4",8),m.zc(1,"Create \u0111\u01a1n h\xe0ng"),m.Ob())}function z(t,e){if(1&t&&(m.Pb(0,"tr"),m.Pb(1,"td",17),m.zc(2),m.Ob(),m.Pb(3,"td"),m.zc(4),m.Ob(),m.Pb(5,"td",18),m.zc(6),m.Ob(),m.Ob()),2&t){const t=e.$implicit,o=e.index;m.xb(2),m.Ac(o+1),m.xb(2),m.Ac(t.name),m.xb(2),m.Ac(t.amount)}}function I(t,e){if(1&t&&(m.Pb(0,"option",22),m.zc(1),m.Ob()),2&t){const t=e.$implicit;m.fc("value",t.value),m.xb(1),m.Ac(t.valueView)}}function w(t,e){if(1&t&&(m.Pb(0,"form",9),m.Pb(1,"div",10),m.Pb(2,"label",11),m.zc(3,"Customer Name:"),m.Ob(),m.Kb(4,"input",12),m.Ob(),m.Pb(5,"div",10),m.Pb(6,"label",11),m.zc(7,"Customer Name:"),m.Ob(),m.Kb(8,"input",13),m.Ob(),m.Pb(9,"div",10),m.Pb(10,"label",11),m.zc(11,"Order ID:"),m.Ob(),m.Kb(12,"input",14),m.Ob(),m.Pb(13,"div",10),m.Pb(14,"label",11),m.zc(15,"Phone Number:"),m.Ob(),m.Kb(16,"input",15),m.Ob(),m.Pb(17,"div",10),m.Pb(18,"label",11),m.zc(19,"Order Info:"),m.Ob(),m.Pb(20,"table",16),m.Pb(21,"tr"),m.Pb(22,"th",17),m.zc(23,"STT"),m.Ob(),m.Pb(24,"th"),m.zc(25,"Product Name"),m.Ob(),m.Pb(26,"th",18),m.zc(27,"Amount"),m.Ob(),m.Ob(),m.xc(28,z,7,3,"tr",19),m.Ob(),m.Ob(),m.Pb(29,"div",10),m.Pb(30,"label",11),m.zc(31,"Order Status:"),m.Ob(),m.Pb(32,"select",20),m.xc(33,I,2,2,"option",21),m.Ob(),m.Ob(),m.Ob()),2&t){const t=m.Yb();m.ec("formGroup",t.form),m.xb(28),m.ec("ngForOf",t.order_details),m.xb(5),m.ec("ngForOf",t.arrStatusOrder)}}function k(t,e){if(1&t&&(m.Pb(0,"tr"),m.Pb(1,"td",17),m.zc(2),m.Ob(),m.Pb(3,"td"),m.zc(4),m.Ob(),m.Pb(5,"td",18),m.zc(6),m.Ob(),m.Ob()),2&t){const t=e.$implicit,o=e.index;m.xb(2),m.Ac(o+1),m.xb(2),m.Ac(t.name.name),m.xb(2),m.Ac(t.amount)}}function Y(t,e){if(1&t){const t=m.Qb();m.Pb(0,"div",27),m.Pb(1,"label",28),m.zc(2,"Amount "),m.Ob(),m.Pb(3,"input",29),m.Wb("keyup",(function(){return m.pc(t),m.Yb(2).currency()})),m.Ob(),m.Pb(4,"h3"),m.zc(5,"Danh s\xe1ch s\u1ea3n ph\u1ea9m"),m.Ob(),m.Pb(6,"table",16),m.Pb(7,"tr"),m.Pb(8,"th",17),m.zc(9,"STT"),m.Ob(),m.Pb(10,"th"),m.zc(11,"Product Name"),m.Ob(),m.Pb(12,"th",18),m.zc(13,"Amount"),m.Ob(),m.Ob(),m.xc(14,k,7,3,"tr",19),m.Ob(),m.Pb(15,"button",30),m.Wb("click",(function(){return m.pc(t),m.Yb(2).upload()})),m.zc(16,"OK"),m.Ob(),m.Ob()}if(2&t){const t=m.Yb(2);m.xb(14),m.ec("ngForOf",t.form.value.order_details)}}function S(t,e){if(1&t){const t=m.Qb();m.Pb(0,"form",9),m.Pb(1,"div",10),m.Pb(2,"label",11),m.zc(3,"Kh\xe1ch H\xe0ng:"),m.Ob(),m.Pb(4,"ng-select",23),m.Wb("focus",(function(){return m.pc(t),m.Yb().getListCustomer()}))("keyup",(function(e){return m.pc(t),m.Yb().searchCustomer(e.target.value)}))("scrollToEnd",(function(){return m.pc(t),m.Yb().scrollEnd("customer")}))("change",(function(){return m.pc(t),m.Yb().show()}))("clear",(function(){return m.pc(t),m.Yb().removeInput("customer")})),m.Ob(),m.Ob(),m.Pb(5,"div",10),m.Pb(6,"label",11),m.zc(7,"Order ID:"),m.Ob(),m.Kb(8,"input",14),m.Ob(),m.Pb(9,"div",10),m.Pb(10,"label",11),m.zc(11,"Tracking:"),m.Ob(),m.Kb(12,"input",24),m.Ob(),m.Pb(13,"div",10),m.Pb(14,"label",11),m.zc(15,"S\u1ea3n Ph\u1ea9m:"),m.Ob(),m.Pb(16,"ng-select",25),m.Wb("focus",(function(){return m.pc(t),m.Yb().getListProduct()}))("keyup",(function(e){return m.pc(t),m.Yb().searchProductGroup(e.target.value)}))("scrollToEnd",(function(){return m.pc(t),m.Yb().scrollEnd("product_group")}))("change",(function(){return m.pc(t),m.Yb().show()}))("clear",(function(){return m.pc(t),m.Yb().removeInput("product_group")})),m.Ob(),m.xc(17,Y,17,1,"div",26),m.Ob(),m.Ob()}if(2&t){const t=m.Yb();m.ec("formGroup",t.form),m.xb(4),m.fc("notFoundText",t.notFoundText),m.ec("items",t.arrCustomer)("loading",t.loadingCustomer)("virtualScroll",!0),m.xb(12),m.fc("notFoundText",t.notFoundText),m.ec("items",t.arrProduct)("loading",t.loadingCustomer)("virtualScroll",!0),m.xb(1),m.ec("ngIf",t.activeAmount)}}function A(t,e){if(1&t){const t=m.Qb();m.Pb(0,"button",31),m.Wb("click",(function(){return m.pc(t),m.Yb().editItem()})),m.zc(1,"Save"),m.Ob()}if(2&t){const t=m.Yb();m.ec("disabled",!t.form.valid)}}function M(t,e){if(1&t){const t=m.Qb();m.Pb(0,"button",32),m.Wb("click",(function(){return m.pc(t),m.Yb().createItem()})),m.zc(1,"Create"),m.Ob()}}let F=(()=>{class t{constructor(t,e,o,r,n,c,a){this.fb=t,this.orderService=e,this.productService=o,this.customerService=r,this.route=n,this.globalService=c,this.router=a,this.arrProduct=[],this.arrCustomer=[],this.arrStatusOrder=p.o,this.notFoundText=p.e,this.activeAmount=!1,this.arrayOrder=[],this.pageProduct={page:1,per_page:8,total_objects:0,search:""},this.pageCusomer={page:1,per_page:8,total_objects:0,search:""},this.loadingCustomer=!1,this.loadingProduct=!1,this.AddForm()}get f(){return this.form.controls}ngOnInit(){this.route.params.subscribe(t=>{void 0!==t.id?(this.id=t.id,this.EditForm(),this.getItem()):this.AddForm()})}AddForm(){this.form=this.fb.group({user_id:["",[c.m.required]],code:["",[c.m.required]],id_tracking:["",[c.m.required]],id_order:["",[c.m.required]],order_details:[[]],amount:[0],id_product:[[]]})}EditForm(){this.form=this.fb.group({status:[""],fullname:[{value:"",disabled:!0}],phone_number:[{value:"",disabled:!0}],order_details:[""],code:[{value:"",disabled:!0}],email:[{value:"",disabled:!0}],product_id:[""]})}getItem(){this.orderService.getItemDetail(this.id).subscribe(t=>{this.form.patchValue({status:t.order.status,fullname:t.order.user.fullname,phone_number:t.order.user.phone_number,order_details:t.order.order_details,code:t.order.code,email:t.order.user.email}),this.order_details=t.order.order_details})}editItem(){this.orderService.edit(this.id,this.form.value).subscribe(t=>{this.router.navigate(["pages/orders"])})}createItem(){}searchProductGroup(t){this.pageProduct.search=t,this.pageProduct.page=1,this.getListProduct("search")}cancel(){this.router.navigate(["pages/orders"])}searchCustomer(t){this.pageCusomer.search=t,this.pageCusomer.page=1,this.getListCustomer("search")}scrollEnd(t){if("product_group"===t){if(this.loadingCustomer||this.arrProduct.length===this.pageProduct.total_objects)return;this.pageProduct.page+=1,this.getListProduct()}if("customer"===t){if(this.loadingCustomer||this.arrCustomer.length===this.pageCusomer.total_objects)return;this.pageCusomer.page+=1,this.getListCustomer()}}removeInput(t){"product_group"===t&&this.searchCustomer(""),"customer"===t&&this.searchCustomer("")}getListProduct(t){this.loadingProduct=!0,this.productService.getListDatas(this.pageProduct).subscribe(e=>{t&&"search"===t&&(this.arrProduct=[]),this.pageProduct.total_objects=e.meta.pagination.total_objects,this.arrProduct=this.arrProduct.concat(e.products),this.loadingProduct=!1})}getListCustomer(t){this.loadingCustomer=!0,this.customerService.getListDatas(this.pageCusomer).subscribe(e=>{t&&"search"===t&&(this.arrCustomer=[]),this.pageCusomer.total_objects=e.meta.pagination.total_objects,this.arrCustomer=this.arrCustomer.concat(e.users),this.loadingCustomer=!1})}currency(){let t=this.form.value.amount.toString();t=t.replace(/[^0-9]/gm,""),t=t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),this.form.controls.amount.setValue(t)}upload(){const t=this.form.value.order_details;t.push({name:this.form.value.id_product,amount:this.form.value.amount,yieldable_type:"Product",yieldable_id:this.form.value.id_product.id}),this.form.controls.order_details.setValue(t)}show(){this.activeAmount=!0}}return t.\u0275fac=function(e){return new(e||t)(m.Jb(c.b),m.Jb(p.h),m.Jb(p.m),m.Jb(p.d),m.Jb(l.a),m.Jb(p.g),m.Jb(l.b))},t.\u0275cmp=m.Db({type:t,selectors:[["app-order-detail"]],decls:11,vars:6,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-control",3,"click"],["type","button","class","btn btn-primary btn-control",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary btn-control",3,"click",4,"ngIf"],[1,"modal-title"],[3,"formGroup"],[1,"form-group"],["for","usr"],["type","text","formControlName","fullname",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","code",1,"form-control"],["type","text","formControlName","phone_number",1,"form-control"],[1,"rwd-table"],[1,"stt"],[1,"amount"],[4,"ngFor","ngForOf"],["formControlName","status",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["bindLabel","fullname","formControlName","user_id",3,"items","notFoundText","loading","virtualScroll","focus","keyup","scrollToEnd","change","clear"],["type","text","formControlName","id_tracking",1,"form-control"],["bindLabel","name","formControlName","id_product",3,"items","notFoundText","loading","virtualScroll","focus","keyup","scrollToEnd","change","clear"],["class","choose-order-detail",4,"ngIf"],[1,"choose-order-detail"],["for","",1,"amount-title"],["type","text","formControlName","amount",1,"amount-value",3,"keyup"],[1,"btn-add",3,"click"],["type","button",1,"btn","btn-primary","btn-control",3,"disabled","click"],["type","button",1,"btn","btn-primary","btn-control",3,"click"]],template:function(t,e){1&t&&(m.Pb(0,"div",0),m.xc(1,_,2,0,"h4",1),m.xc(2,y,2,0,"h4",1),m.Ob(),m.Pb(3,"div",2),m.xc(4,w,34,3,"form",3),m.xc(5,S,18,10,"form",3),m.Ob(),m.Pb(6,"div",4),m.Pb(7,"button",5),m.Wb("click",(function(){return e.cancel()})),m.zc(8,"Close"),m.Ob(),m.xc(9,A,2,1,"button",6),m.xc(10,M,2,0,"button",7),m.Ob()),2&t&&(m.xb(1),m.ec("ngIf",e.id),m.xb(1),m.ec("ngIf",!e.id),m.xb(2),m.ec("ngIf",e.id),m.xb(1),m.ec("ngIf",!e.id),m.xb(4),m.ec("ngIf",e.id),m.xb(1),m.ec("ngIf",!e.id))},directives:[r.l,c.o,c.h,c.d,c.a,c.g,c.c,r.k,c.l,c.j,c.n,i.a],styles:[".rwd-table[_ngcontent-%COMP%]{width:100%;margin:auto;background-color:#34495e;border-radius:5px}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;color:#dd5}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;color:#fff5ee}.rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .rwd-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .stt[_ngcontent-%COMP%]{text-align:center}.flex-row[_ngcontent-%COMP%]{display:flex}.choose-order-detail[_ngcontent-%COMP%]   .amount-title[_ngcontent-%COMP%]{padding:15px 20px 15px 0}.choose-order-detail[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{margin-top:15px;background:#59db59;padding:10px 35px;border:none;box-shadow:3px 5px 2px #bdbd41;border-radius:15px}"]}),t})();const R=[{path:"",component:C},{path:"create",component:F},{path:"detail/:id",component:F}];let N=(()=>{class t{}return t.\u0275mod=m.Hb({type:t}),t.\u0275inj=m.Gb({factory:function(e){return new(e||t)},imports:[[l.c.forChild(R)],l.c]}),t})();var T=o("rIor");let j=(()=>{class t{}return t.\u0275mod=m.Hb({type:t}),t.\u0275inj=m.Gb({factory:function(e){return new(e||t)},imports:[[r.c,N,n.g,c.e,c.k,a.a,i.c,T.b,s.c.forRoot(),b.a]]}),t})()}}]);