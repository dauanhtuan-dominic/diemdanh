(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{S3XU:function(e,t,o){"use strict";o.r(t),o.d(t,"AccessoryModule",(function(){return W}));var a=o("ofXK"),i=o("tyNb"),r=o("XNiG"),c=o("Kj3r"),n=o("+ts/"),s=o("fXoL"),b=o("3Pt+"),l=o("K3ix"),p=o("lDzL");function u(e,t){if(1&e&&(s.Pb(0,"strong",23),s.zc(1),s.Ob()),2&e){const e=t.rowIndex,o=s.Yb();s.xb(1),s.Ac(e+1+(10*o.pageResult.page-10))}}function g(e,t){1&e&&(s.zc(0),s.Zb(1,"currency")),2&e&&s.Bc(" ",s.bc(1,1,t.row.price,"USD")," ")}function m(e,t){1&e&&s.Kb(0,"img",24),2&e&&s.fc("src",t.row.thumb_image.url,s.rc)}function d(e,t){if(1&e){const e=s.Qb();s.Pb(0,"i",25),s.Wb("click",(function(){s.pc(e);const o=t.row;return s.Yb().editItem(o.id)})),s.Ob(),s.Pb(1,"i",26),s.Wb("click",(function(){s.pc(e);const o=t.row,a=s.Yb(),i=s.mc(32);return a.GetIdDelete(i,o.id)})),s.Ob()}}function h(e,t){if(1&e&&(s.Pb(0,"option",32),s.zc(1),s.Ob()),2&e){const e=t.$implicit;s.fc("value",e.number),s.xb(1),s.Ac(e.name)}}function f(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",27),s.zc(1," DIsplay "),s.Pb(2,"select",28),s.Wb("ngModelChange",(function(t){return s.pc(e),s.Yb().pageResult.per_page=t}))("click",(function(){return s.pc(e),s.Yb().selectItemPerPage()})),s.xc(3,h,2,2,"option",29),s.Ob(),s.Pb(4,"span",30),s.zc(5),s.Ob(),s.Ob(),s.Pb(6,"datatable-pager",31),s.Wb("change",(function(t){return s.pc(e),s.Yb(),s.mc(19).onFooterPage(t)}))("change",(function(t){return s.pc(e),s.Yb().changePage(t)})),s.Ob()}if(2&e){const e=s.Yb();s.xb(2),s.ec("ngModel",e.pageResult.per_page),s.xb(1),s.ec("ngForOf",e.element),s.xb(2),s.Bc(" in total ",e.pageResult.total_objects," result"),s.xb(1),s.ec("pagerLeftArrowIcon","datatable-icon-left")("pagerRightArrowIcon","datatable-icon-right")("pagerPreviousIcon","datatable-icon-prev")("pagerNextIcon","datatable-icon-skip")("page",e.pageResult.page)("size",e.pageResult.per_page)("count",e.pageResult.total_objects)}}function P(e,t){if(1&e){const e=s.Qb();s.Pb(0,"div",33),s.Pb(1,"h4",34),s.zc(2,"Are you sure delete this item?"),s.Ob(),s.Pb(3,"button",35),s.Wb("click",(function(){return s.pc(e),s.Yb().modalRef.hide()})),s.Pb(4,"span",36),s.zc(5,"\xd7"),s.Ob(),s.Ob(),s.Ob(),s.Pb(6,"div",37),s.Pb(7,"button",38),s.Wb("click",(function(){return s.pc(e),s.Yb().DeleteItem()})),s.zc(8,"Yes"),s.Ob(),s.Pb(9,"button",39),s.Wb("click",(function(){return s.pc(e),s.Yb().modalRef.hide()})),s.zc(10,"No"),s.Ob(),s.Ob()}}let x=(()=>{class e{constructor(e,t,o,a){this.accessorySerivce=e,this.fb=t,this.router=o,this.modalService=a,this.element=n.c,this.pageResult={page:1,per_page:10,total_objects:0,name:""},this.isAdmin=!0,this.messages={emptyMessage:"No data to display"},this.modelAccessory=new r.a,this.formAdd()}ngOnInit(){this.getDatasList(),this.delaySearch()}formAdd(){this.formSearch=this.fb.group({arrTrademark:[[]],arrPosition:[[]],arrDepartment:[[]],search:[""]})}delaySearch(){this.modelAccessory.pipe(Object(c.a)(n.p)).subscribe(e=>{this.pageResult.name=this.formSearch.value.search,this.pageResult.page=1,this.getDatasList()})}getDatasList(){this.accessorySerivce.getDatasList(this.pageResult).subscribe(e=>{this.tableData=e.accessories,this.pageResult.total_objects=e.meta.pagination.total_objects||1})}DeleteItem(){this.accessorySerivce.delete(this.id).subscribe(e=>{this.getDatasList(),this.modalRef.hide()})}changePage(e){this.pageResult.page=e.page,this.getDatasList()}selectItemPerPage(){this.pageResult.page=1,this.getDatasList()}GetIdDelete(e,t){this.modalRef=this.modalService.show(e),this.id=t}search(){this.modelAccessory.next()}addNewItem(){this.router.navigate(["pages/accessories/create"])}editItem(e){this.router.navigate(["pages/accessories/detail/"+e])}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(n.a),s.Jb(b.b),s.Jb(i.b),s.Jb(l.b))},e.\u0275cmp=s.Db({type:e,selectors:[["app-accessory"]],decls:33,vars:12,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[3,"formGroup"],[1,"col-lg-3"],[1,"searchContainer"],[1,"icon"],[1,"fa","fa-search"],["type","text","formControlName","search","placeholder","T\xecm...",1,"form-control",3,"keyup"],["type","button",1,"btn","btn-success",3,"click"],[1,"table"],[1,"material","expandable","striped",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","messages"],["table",""],["name","STT",2,"width","60px !important",3,"sortable","resizeable","canAutoResize","maxWidth"],["style","width: 60px !important;","ngx-datatable-cell-template",""],["name","Product Name","cellClass","textalignleft","prop","name"],["name","Price","cellClass","textalignleft"],["ngx-datatable-cell-template",""],["name","Picture","cellClass","textalignleft"],["name","Action",3,"sortable"],["ngx-datatable-footer-template",""],["deleteRow",""],[2,"width","60px !important"],[2,"height","60px",3,"src"],["aria-hidden","true",1,"fa","fa-pencil-square-o","icon-action",3,"click"],["aria-hidden","true","data-toggle","modal","data-target","#deleteRow",1,"fa","fa-trash","icon-action",3,"click"],[1,"col-6","col-md-6"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[1,"soluong"],[1,"col-6","col-md-6",3,"pagerLeftArrowIcon","pagerRightArrowIcon","pagerPreviousIcon","pagerNextIcon","page","size","count","change"],[3,"value"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-dark",3,"click"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.Pb(1,"div",1),s.Pb(2,"div",2),s.Pb(3,"div",3),s.Pb(4,"form",4),s.Pb(5,"div",0),s.Pb(6,"div",5),s.Pb(7,"div",6),s.Pb(8,"span",7),s.Kb(9,"i",8),s.Ob(),s.Pb(10,"input",9),s.Wb("keyup",(function(){return t.search()})),s.Ob(),s.Ob(),s.Ob(),s.Kb(11,"div",5),s.Pb(12,"div",5),s.Pb(13,"div",2),s.Pb(14,"button",10),s.Wb("click",(function(){return t.addNewItem()})),s.zc(15,"Create"),s.Ob(),s.Ob(),s.Ob(),s.Kb(16,"div",5),s.Ob(),s.Ob(),s.Pb(17,"div",11),s.Pb(18,"ngx-datatable",12,13),s.Pb(20,"ngx-datatable-column",14),s.xc(21,u,2,1,"ng-template",15),s.Ob(),s.Kb(22,"ngx-datatable-column",16),s.Pb(23,"ngx-datatable-column",17),s.xc(24,g,2,4,"ng-template",18),s.Ob(),s.Pb(25,"ngx-datatable-column",19),s.xc(26,m,1,1,"ng-template",18),s.Ob(),s.Pb(27,"ngx-datatable-column",20),s.xc(28,d,2,0,"ng-template",18),s.Ob(),s.Pb(29,"ngx-datatable-footer"),s.xc(30,f,7,10,"ng-template",21),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.xc(31,P,11,0,"ng-template",null,22,s.yc)),2&e&&(s.xb(4),s.ec("formGroup",t.formSearch),s.xb(14),s.ec("columnMode","force")("headerHeight",50)("footerHeight",80)("rowHeight",60)("rows",t.tableData)("messages",t.messages),s.xb(2),s.ec("sortable",!1)("resizeable",!1)("canAutoResize",!1)("maxWidth",50),s.xb(7),s.ec("sortable",!1))},directives:[b.o,b.h,b.d,b.a,b.g,b.c,p.e,p.b,p.a,p.f,p.c,b.l,b.i,a.k,p.d,b.j,b.n],pipes:[a.d],styles:[".searchContainer[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.searchContainer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:30px}.searchContainer[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;margin:auto;padding-left:10px;display:flex;align-items:center;cursor:pointer}"]}),e})();var v=o("rIor");function O(e,t){1&e&&(s.Pb(0,"h4",22),s.zc(1,"Th\xeam s\u1ea3n ph\u1ea9m"),s.Ob())}function y(e,t){1&e&&(s.Pb(0,"h4",22),s.zc(1,"Description s\u1ea3n ph\u1ea9m"),s.Ob())}function _(e,t){1&e&&(s.Pb(0,"span"),s.zc(1," Product Name kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng "),s.Ob())}function I(e,t){1&e&&(s.Pb(0,"span"),s.zc(1," Please Enter Price "),s.Ob())}function C(e,t){if(1&e&&s.Kb(0,"img",23),2&e){const e=s.Yb();s.ec("src",e.imageThumb.image,s.rc)}}function w(e,t){if(1&e&&s.Kb(0,"img",24),2&e){const e=s.Yb();s.ec("src",e.form.value.thumb_image.url,s.rc)}}function R(e,t){if(1&e&&s.Kb(0,"img",23),2&e){const e=s.Yb();s.ec("src",e.imagePhoto.image,s.rc)}}function k(e,t){if(1&e&&(s.Pb(0,"div",25),s.Kb(1,"img",24),s.Ob()),2&e){const e=t.$implicit;s.xb(1),s.ec("src",e.url,s.rc)}}function z(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",26),s.Wb("click",(function(){return s.pc(e),s.Yb().create()})),s.zc(1,"Create"),s.Ob()}}function D(e,t){if(1&e){const e=s.Qb();s.Pb(0,"button",27),s.Wb("click",(function(){return s.pc(e),s.Yb().editItem()})),s.zc(1,"Save"),s.Ob()}if(2&e){const e=s.Yb();s.ec("disabled",!e.form.valid)}}let G=(()=>{class e{constructor(e,t,o,a,i,r,c,n){this.bsmodalRef=e,this.productGroupsService=t,this.fb=o,this.uploadService=a,this.globalService=i,this.route=r,this.accessoryService=c,this.router=n,this.arrProductGroups=[],this.pageProductGroups={page:1,per_page:10,total_objects:0,product_type:"food",search:""},this.imageThumb={image:"",imageChanged:"",name:""},this.imagePhoto={image:"",imageChanged:"",name:""},this.imageChangedEvent="",this.croppedImage="",this.imageName="",this.loadingProductGroup=!1,this.AddForm()}get f(){return this.form.controls}ngOnInit(){this.route.params.subscribe(e=>{void 0!==e.id?(this.id=e.id,this.AddForm(),this.getDataDetail()):this.AddForm()})}AddForm(){this.form=this.fb.group({name:["",[b.m.required]],description:[""],product_group_id:[null],price:[""],product_image:[File],photos:[""],thumb_image:[""]})}getDataDetail(){this.accessoryService.getDataDetail(this.id).subscribe(e=>{this.form.patchValue({name:e.accessory.name,description:e.accessory.description,product_group_id:e.accessory.product_group_id,thumb_image:e.accessory.thumb_image,price:new Intl.NumberFormat("en-IN",{maximumSignificantDigits:4}).format(e.accessory.price)||0,photos:e.accessory.photos})})}editItem(){const e=this.form.value;e.thumb_image_attributes=e.thumb_image,e.photos_attributes=e.photos,this.accessoryService.edit(this.id,e).subscribe(e=>{this.router.navigate(["pages/accessories"])})}createItem(){const e=this.objectJsonToFormData();this.accessoryService.create(e).subscribe(e=>{this.router.navigate(["pages/accessories"])})}cancel(){this.router.navigate(["pages/accessories"])}currency(){let e=this.form.value.price.toString();e=e.replace(/[^0-9]/gm,""),e=e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),this.form.controls.price.setValue(e)}objectJsonToFormData(){if(""!==this.croppedImage){const e=this.globalService.dataURItoBlob(this.croppedImage,this.imageName);this.form.controls.product_image.setValue(e)}const e=new FormData,t=this.form.value;for(var o in t.price=t.price?t.price.replace(/[^0-9]/gm,""):0,t)"product_image"===o?""!==this.croppedImage&&e.append(`product[${o}]`,t[o],t[o].name):e.append(`product[${o}]`,null===t[o]?t[o].toString():null);return e}getProductGroups(e){this.loadingProductGroup=!0,this.productGroupsService.getListDatas(this.pageProductGroups).subscribe(t=>{e&&"search"===e&&(this.arrProductGroups=[]),this.pageProductGroups.total_objects=t.meta.pagination.total_objects,this.arrProductGroups=this.arrProductGroups.concat(t.product_groups),this.loadingProductGroup=!1})}fileChangeEvent(e,t){const o=e.target.value.split(/\\/g);"thumb_image"===t?(this.imageThumb.name=o[o.length-1],this.imageThumb.imageChanged=e):"photos"===t&&(this.imagePhoto.name=o[o.length-1],this.imagePhoto.imageChanged=e)}imageCropped(e,t){"thumb_image"===t?this.imageThumb.image=e.base64:"photos"===t&&(this.imagePhoto.image=e.base64)}imageLoaded(){}cropperReady(){}loadImageFailed(){}upload(e){if("thumb_image"===e){const e=this.uploadService.dataURItoBlob(this.imageThumb.image,this.imageThumb.name);this.uploadService.uploadFile(e).subscribe(e=>{this.form.controls.thumb_image.setValue({url:e.data[0],thumb_image_type:"Product"})})}else if("photos"===e){const e=this.uploadService.dataURItoBlob(this.imagePhoto.image,this.imagePhoto.name);this.uploadService.uploadFile(e).subscribe(e=>{const t=null===this.form.value.photos?[]:this.form.value.photos;t.push({url:e.data[0],photoable_type:"Product"}),this.form.controls.photos.setValue(t)})}}removePhoto(e){const t=this.form.value.photos.filter(t=>t.id!==e.id);this.form.controls.photos.setValue(t)}searchProductGroup(e){this.pageProductGroups.search=e,this.pageProductGroups.page=1,this.getProductGroups("search")}scrollEnd(e){if("product_group"===e){if(this.loadingProductGroup||this.arrProductGroups.length===this.pageProductGroups.total_objects)return;this.pageProductGroups.page+=1,this.getProductGroups()}}removeInput(e){"product_group"===e&&this.searchProductGroup("")}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(l.a),s.Jb(n.l),s.Jb(b.b),s.Jb(n.q),s.Jb(n.g),s.Jb(i.a),s.Jb(n.a),s.Jb(i.b))},e.\u0275cmp=s.Db({type:e,selectors:[["app-accessroy-detail"]],decls:46,vars:17,consts:[[1,"modal-header"],["class","modal-title",4,"ngIf"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["for","usr"],["type","text","formControlName","name",1,"form-control"],[1,"text-arlet"],[4,"ngIf"],["type","text","formControlName","price",1,"form-control",3,"keyup"],["type","text","formControlName","description",1,"form-control"],["type","file",1,"form-control",3,"change"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed"],["style","width: 200px;",3,"src",4,"ngIf"],["type","button",1,"btn","btn-default","btn-control",3,"click"],[1,"img-thumb"],["style","width: 100px;",3,"src",4,"ngIf"],[1,"list-image"],["class","image-item",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","class","btn btn-primary btn-control",3,"click",4,"ngIf"],["type","button","class","btn btn-primary btn-control",3,"disabled","click",4,"ngIf"],[1,"modal-title"],[2,"width","200px",3,"src"],[2,"width","100px",3,"src"],[1,"image-item"],["type","button",1,"btn","btn-primary","btn-control",3,"click"],["type","button",1,"btn","btn-primary","btn-control",3,"disabled","click"]],template:function(e,t){1&e&&(s.Pb(0,"div",0),s.xc(1,O,2,0,"h4",1),s.xc(2,y,2,0,"h4",1),s.Ob(),s.Pb(3,"div",2),s.Pb(4,"form",3),s.Pb(5,"div",4),s.Pb(6,"label",5),s.zc(7,"Product Name:"),s.Ob(),s.Kb(8,"input",6),s.Ob(),s.Pb(9,"div",7),s.xc(10,_,2,0,"span",8),s.Ob(),s.Pb(11,"div",4),s.Pb(12,"label",5),s.zc(13,"Price:"),s.Ob(),s.Pb(14,"input",9),s.Wb("keyup",(function(){return t.currency()})),s.Ob(),s.Ob(),s.Pb(15,"div",7),s.xc(16,I,2,0,"span",8),s.Ob(),s.Pb(17,"div",4),s.Pb(18,"label",5),s.zc(19,"Description:"),s.Ob(),s.Kb(20,"input",10),s.Ob(),s.Pb(21,"div",4),s.Pb(22,"label",5),s.zc(23,"Thumb image:"),s.Ob(),s.Pb(24,"input",11),s.Wb("change",(function(e){return t.fileChangeEvent(e,"thumb_image")})),s.Ob(),s.Pb(25,"image-cropper",12),s.Wb("imageCropped",(function(e){return t.imageCropped(e,"thumb_image")}))("imageLoaded",(function(){return t.imageLoaded()}))("cropperReady",(function(){return t.cropperReady()}))("loadImageFailed",(function(){return t.loadImageFailed()})),s.Ob(),s.xc(26,C,1,1,"img",13),s.Pb(27,"button",14),s.Wb("click",(function(){return t.upload("thumb_image")})),s.zc(28,"Upload"),s.Ob(),s.Pb(29,"div",15),s.xc(30,w,1,1,"img",16),s.Ob(),s.Ob(),s.Pb(31,"div",4),s.Pb(32,"label",5),s.zc(33,"Photos:"),s.Ob(),s.Pb(34,"input",11),s.Wb("change",(function(e){return t.fileChangeEvent(e,"photos")})),s.Ob(),s.Pb(35,"image-cropper",12),s.Wb("imageCropped",(function(e){return t.imageCropped(e,"photos")}))("imageLoaded",(function(){return t.imageLoaded()}))("cropperReady",(function(){return t.cropperReady()}))("loadImageFailed",(function(){return t.loadImageFailed()})),s.Ob(),s.xc(36,R,1,1,"img",13),s.Pb(37,"button",14),s.Wb("click",(function(){return t.upload("photos")})),s.zc(38,"Upload"),s.Ob(),s.Pb(39,"div",17),s.xc(40,k,2,1,"div",18),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(41,"div",19),s.Pb(42,"button",14),s.Wb("click",(function(){return t.cancel()})),s.zc(43,"Close"),s.Ob(),s.xc(44,z,2,0,"button",20),s.xc(45,D,2,1,"button",21),s.Ob()),2&e&&(s.xb(1),s.ec("ngIf",!t.id),s.xb(1),s.ec("ngIf",t.id),s.xb(2),s.ec("formGroup",t.form),s.xb(6),s.ec("ngIf",(null==t.f.name.errors?null:t.f.name.errors.required)&&t.f.name.touched),s.xb(6),s.ec("ngIf",(null==t.f.price.errors?null:t.f.price.errors.required)&&t.f.price.touched),s.xb(9),s.ec("imageChangedEvent",t.imageThumb.imageChanged)("maintainAspectRatio",!0)("aspectRatio",1),s.xb(1),s.ec("ngIf",t.imageThumb.image),s.xb(4),s.ec("ngIf",t.form.value.thumb_image),s.xb(5),s.ec("imageChangedEvent",t.imagePhoto.imageChanged)("maintainAspectRatio",!0)("aspectRatio",1),s.xb(1),s.ec("ngIf",t.imagePhoto.image),s.xb(4),s.ec("ngForOf",t.form.value.photos),s.xb(4),s.ec("ngIf",!t.id),s.xb(1),s.ec("ngIf",t.id))},directives:[a.l,b.o,b.h,b.d,b.a,b.g,b.c,v.a,a.k],styles:[".text-arlet[_ngcontent-%COMP%]{margin:-10px 0 10px 10px;color:red;font-family:Nunito Sans,sans-serif;font-size:1.5rem;font-weight:400;line-height:1.5}.list-image[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.list-image[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]{position:relative;border:1px solid #000;padding:15px;margin:10px;border-radius:15px}.list-image[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]   .fa-times-circle-o[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px}.img-thumb[_ngcontent-%COMP%]{margin:10px 0}.img-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #000;border-radius:15px}"]}),e})();const S=[{path:"",component:x},{path:"create",component:G},{path:"detail/:id",component:G}];let A=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[i.c.forChild(S)],i.c]}),e})();var F=o("tgok"),M=o("ZOsW");let W=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[a.c,A,p.g,b.k,b.e,F.a,M.c,v.b,l.c.forRoot()]]}),e})()}}]);